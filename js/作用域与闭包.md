---
title: 作用域与闭包
tags:
- JavaScript
---

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [词法作用域](#%E8%AF%8D%E6%B3%95%E4%BD%9C%E7%94%A8%E5%9F%9F)
- [闭包](#%E9%97%AD%E5%8C%85)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## 词法作用域

全局变量会自动成为全局对象(比如浏览器中的window对象)的属性,因此可以间接地通过全局对象属性的引用来对其进行访问

```js
var a = 10;
a  // 10
window.a //10
```

无论函数在哪里被调用,也无论它如何呗调用,它的词法作用域都只由函数被声明时所处的位置决定.

### 关于 const 和 let 声明的变量不在 window 上

[相关链接](https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/30)

在ES5中，顶层对象的属性和全局变量是等价的，var 命令和 function 命令声明的全局变量，自然也是顶层对象。

```js
var a = 12;
function f(){};

console.log(window.a); // 12
console.log(window.f); // f(){}
```

但ES6规定，var 命令和 function 命令声明的全局变量，依旧是顶层对象的属性，但 let命令、const命令、class命令声明的全局变量，不属于顶层对象的属性。
class、let定义的即便是全局对象，但不是顶层对象的属性，在window自然获取不到，只能去定义变量的块级作用域里获取

## 闭包

[阮一峰-学习JavaScript闭包](https://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html)

什么是闭包?

> 函数和对其周围状态（**lexical environment，词法环境**）的引用捆绑在一起构成**闭包**（**closure**）。也就是说，闭包可以让你从内部函数访问外部函数作用域。在 JavaScript 中，每当函数被创建，就会在函数生成时生成闭包。

简单来说,闭包就是指**能够访问其它函数内部变量的函数**

```js
闭包是个函数，而它「记住了周围发生了什么」。表现为由「一个函数」体中定义了「另个函数」
```

使用闭包的注意点

![image-20200609092422638](https://minimax-1256590847.cos.ap-shanghai.myqcloud.com/img/image-20200609092422638.png)